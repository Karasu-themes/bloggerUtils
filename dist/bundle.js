/*!
* @karasu-themes/blogger-utils v1.3.0
* https://github.com/Karasu-themes/bloggerSection
*
* Copyright Â© 2023 MarceloTLD
* 
* Released under the MIT License
*-----------------------------------------------*/
var bloggerUtils=function(a){"use strict";function m(e){let t={};const r=/data-[\w-]+=[\"']+[^\"']+[\"']+/g,n=e.match(r);return!n||n.length==0?{}:(n.forEach(o=>{const c=o.match(/[\"'].+[\"']/)[0].replace(/\"|\'/g,""),u=o.match(/data-.+=/g)[0].replace(/data-|=/g,"").replace(/-\w+/g,function(i){const s=i.replace("-","");return s[0].toUpperCase()+s.slice(1)});t[u]=c}),t)}function d(e){return e.replace(/<[^>]*>?/g,"")}function y(e){const t=e.id.$t.match(/post-\d{1,}/g);return t?t[0].replace("post-",""):""}function $(e){const t=e.id.$t.match(/blog-\d{1,}/g);return t?t[0].replace("blog-",""):""}function v(e){return e.title?e.title.$t:"No title"}function h(e){return e.content?e.content.$t:e.summary?e.summary.$t:""}function E(e){let t="";return e.link.forEach(r=>{r.rel=="alternate"&&(t=r.href)}),t}function I(e,t){const r=d(e);return r.length>t?r.substr(0,t)+"...":r}function w(e,t){let r=document.createElement("div");r.innerHTML=e;let n=r.querySelector("img");return n?n.src:t}function _(e,t){return e.media$thumbnail?e.media$thumbnail.url:t}function D(e){return{authorName:e.name?e.name.$t:"Unknown",authorUri:e.uri?e.uri.$t:"#noProfileUrl"}}function S(e){return{datePost:e.published?new Date(e.published.$t).toLocaleDateString():"",postUpdate:e.updated?new Date(e.updated.$t).toLocaleDateString():"",datePostIso8601:e.updated.$t??e.published.$t}}function k(e){return e.category?e.category.map(t=>t.term):[]}function N(e,t){const r=h(e),n=w(r,t.defaultImage||"#noImageFounded");return{title:v(e),url:E(e),postID:y(e),blogID:$(e),image:n,thumbnail:_(e,t.imageParams||"s74-c"),body:h(e),summary:I(r,t.summary||96),labels:k(e),...D(e),...S(e),...m(r)}}function b(e){return e=="true"?!0:e=="false"?!1:isNaN(e)?e:Number(e)}function T(e){const t={},r=/\$[a-zA-Z]*{([^}]*)}/g;if(!r.test(e))return{};const n=e.match(r);return n.forEach(o=>{const c=o,u=c.replace(/\$|{(.*)}/g,""),i=c.match(/{(.*)}/g)[0].replace(/{|}/g,"");t[u]=b(i)}),n.length?t:{}}function U(){function e(c,u){return localStorage.setItem(c,u),u}function t(c){const u=localStorage.getItem(c);return u||""}function r(c){return t(c)?(localStorage.removeItem(c),!0):!1}function n(c,u){e(c,u)}function o(){return localStorage.clear()}return{create:e,read:t,remove:r,update:n,clear:o}}function A(){function e(r){return JSON.parse(r)??!1}function t(r){return JSON.stringify(r)??!1}return{decode:e,encode:t}}function P(e,t){return e.replace(/\{(\w+)\}/g,function(r){const n=r.replace(/\{|\}/g,"");return t[n]||""})}function L(e,t){return e.replace(/{if(\.\w+\s)[^]*?\/}/g,function(r){const n=r.match(/if.\w+/)[0].replace("if.","");return t[n]?r.replace(/{if.\w+|\/\}/g,""):""})}function M(e,t){return e.replace(/{else(\.\w+\s)[^]*?\/}/g,function(r){const n=r.match(/else.\w+/)[0].replace("else.","");return t[n]?"":r.replace(/{else.\w+|\/\}/g,"")})}function O(e,t){return e.replace(/\{image(.+)\}/g,function(r){const n=r.replace(/\{image|\(|\)|\}/g,"");return t.thumbnail?t.thumbnail.replace(/s\B\d{2,4}(-?w\d{2,4})?-c/,n):""})}function j(e,t){function r(o,c){return c.some(u=>o.includes(u))}function n(o){const c=o.replace(/\[(.+)\]/g,""),u=o.replace(/include|exclude|remove|\[|\]/g,"").split(",").map(i=>i.trim());return{action:c.trim(),params:u}}return e.replace(/{loop\.(.+\s)[^]*?\/}/g,function(o){let c="";const{action:u,params:i}=/\((.+)\)/.test(o)?n(o.match(/\((.+)\)/)[1]):{},s=o.match(/loop.\w+/)[0].replace("loop.",""),f=o.replace(/{loop\.(.+\s)|\/}/g,"");if(t[s]){const g=t[s];return u=="remove"?g.filter(l=>!i.includes(l)).forEach((l,p)=>{c+=f.replace(/@value/g,l).replace(/@index/g,p+1)}):u=="include"?g.filter(l=>r(l,i)).forEach((l,p)=>{c+=f.replace(/@value/g,l).replace(/@index/g,p+1)}):u=="exclude"?g.filter(l=>!r(l,i)).forEach((l,p)=>{c+=f.replace(/@value/g,l).replace(/@index/g,p+1)}):g.forEach((l,p)=>{c+=f.replace(/@value/g,l).replace(/@index/g,p+1)}),c}else return""})}function R(e,t){let r=P(e,t);return[L,M,j,O].forEach(o=>{r=o(r,t)}),r}function F(e){const t=typeof e;let r="";if(t!=="object")return"";for(const n in e)if(Object.hasOwnProperty.call(e,n)){const o=e[n];r+=`${n}=${o}&`}return"?"+r.slice(0,-1)}function C(e){const{homeURL:t,type:r,label:n,mod:o,params:c}=e,u=document.createElement("script"),i="",s=r||"posts",f=o||"default",g=n?`/${f}/-/${n}`:`/${f}`;return u.src=(t||i)+"/feeds/"+s+g+F(c??{}),u}return a.feed=C,a.json=A,a.parser=N,a.parserAttr=m,a.parserConfig=T,a.storage=U,a.stripTags=d,a.template=R,a.typos=b,a}({});
