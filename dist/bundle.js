/*!
* @karasu-themes/blogger-utils v1.0.0
* https://github.com/Karasu-themes/bloggerSection
*
* Copyright Â© 2023 MarceloTLD
* 
* Released under the MIT License
*-----------------------------------------------*/
var bloggerUtils=function(u){"use strict";function m(e){let t={};const r=/data-[\w-]+=[\"']+[^\"']+[\"']+/g,n=e.match(r);return n.length==0?{}:(n.forEach(l=>{const c=l.match(/[\"'].+[\"']/)[0].replace(/\"|\'/g,""),o=l.match(/data-.+=/g)[0].replace(/data-|=/g,"").replace(/-\w+/g,function(a){const f=a.replace("-","");return f[0].toUpperCase()+f.slice(1)});t[o]=c}),t)}function d(e){return e.replace(/<[^>]*>?/g,"")}function I(e){return e.id.$t.match(/post-\d{1,}/g)[0].replace("post-","")}function b(e){return e.id.$t.match(/blog-\d{1,}/g)[0].replace("blog-","")}function v(e){return e.title?e.title.$t:"No title"}function h(e){return e.content?e.content.$t:e.summary.$t}function y(e){let t="";return e.link.forEach(r=>{r.rel=="alternate"&&(t=r.href)}),t}function w(e,t){const r=d(e);return r.length>t?r.substr(0,t)+"...":r}function D(e,t){let r=document.createElement("div");r.innerHTML=e;let n=r.querySelector("img");return n?n.src:t}function E(e,t){return e.media$thumbnail?e.media$thumbnail.url:t}function S(e){return{authorName:e.name?e.name.$t:"Unknown",authorUri:e.uri?e.uri.$t:"#noProfileUrl"}}function $(e){return{datePost:new Date(e.published.$t).toLocaleDateString(),postUpdate:new Date(e.updated.$t).toLocaleDateString(),datePostIso8601:e.published.$t}}function k(e){return e.category?e.category.map(t=>t.term):[]}function _(e,t){const r=h(e),n=D(r,t.defaultImage||"#noImageFounded");return{title:v(e),url:y(e),postID:I(e),blogID:b(e),image:n,thumbnail:E(e,t.imageParams||"s74-c"),body:h(e),summary:w(r,t.summary||96),labels:k(e),...S(e),...$(e),...m(r)}}function N(){function e(c,o){return localStorage.setItem(c,o),o}function t(c){const o=localStorage.getItem(c);return o||""}function r(c){return t(c)?(localStorage.removeItem(c),!0):!1}function n(c,o){e(c,o)}function l(){return localStorage.clear()}return{create:e,read:t,remove:r,update:n,clear:l}}function U(){function e(r){return JSON.parse(r)??!1}function t(r){return JSON.stringify(r)??!1}return{decode:e,encode:t}}function A(e,t){return e.replace(/\{(\w+)\}/g,function(r){const n=r.replace(/\{|\}/g,"");return t[n]||""})}function T(e,t){return e.replace(/{if(\.\w+\s)[^]*?\/}/g,function(r){const n=r.match(/if.\w+/)[0].replace("if.","");return t[n]?r.replace(/{if.\w+|\/\}/g,""):""})}function M(e,t){return e.replace(/{else(\.\w+\s)[^]*?\/}/g,function(r){const n=r.match(/else.\w+/)[0].replace("else.","");return t[n]?"":r.replace(/{else.\w+|\/\}/g,"")})}function P(e,t){return e.replace(/\{image(.+)\}/g,function(r){const n=r.replace(/\{image|\(|\)|\}/g,"");return t.thumbnail?t.thumbnail.replace(/s\B\d{2,4}(-?w\d{2,4})?-c/,n):""})}function F(e,t){function r(l,c){return c.some(o=>l.includes(o))}function n(l){const c=l.replace(/\[(.+)\]/g,""),o=l.replace(/include|exclude|remove|\[|\]/g,"").split(",").map(a=>a.trim());return{action:c.trim(),params:o}}return e.replace(/{loop\.(.+\s)[^]*?\/}/g,function(l){let c="";const{action:o,params:a}=/\((.+)\)/.test(l)?n(l.match(/\((.+)\)/)[1]):{},f=l.match(/loop.\w+/)[0].replace("loop.",""),g=l.replace(/{loop\.(.+\s)|\/}/g,"");if(t[f]){const p=t[f];return o=="remove"?p.filter(i=>!a.includes(i)).forEach((i,s)=>{c+=g.replace(/@value/g,i).replace(/@index/g,s+1)}):o=="include"?p.filter(i=>r(i,a)).forEach((i,s)=>{c+=g.replace(/@value/g,i).replace(/@index/g,s+1)}):o=="exclude"?p.filter(i=>!r(i,a)).forEach((i,s)=>{c+=g.replace(/@value/g,i).replace(/@index/g,s+1)}):p.forEach((i,s)=>{c+=g.replace(/@value/g,i).replace(/@index/g,s+1)}),c}else return""})}function L(e,t){let r=A(e,t);return[T,M,F,P].forEach(l=>{r=l(r,t)}),r}return u.json=U,u.parser=_,u.parserAttr=m,u.storage=N,u.stripTags=d,u.template=L,u}({});
